{"version":3,"file":"vega-view.min.js","sources":["../src/aria.js","../src/cursor.js","../src/data.js","../src/render-size.js","../src/events-extend.js","../src/events.js","../src/hover.js","../src/element.js","../../../node_modules/d3-array/src/ticks.js","../src/bind.js","../src/initialize-renderer.js","../src/trap.js","../src/initialize.js","../src/padding.js","../src/render-headless.js","../src/size.js","../src/state.js","../../../node_modules/d3-timer/src/timer.js","../src/tooltip.js","../src/View.js","../src/runtime.js","../src/background.js","../src/timer.js","../../../node_modules/d3-timer/src/interval.js","../src/finalize.js","../src/scale.js","../src/initialize-handler.js","../src/render-to-image-url.js","../src/render-to-canvas.js","../src/render-to-svg.js"],"sourcesContent":["// initialize aria role and label attributes\nexport function initializeAria(view) {\n  const el = view.container();\n  if (el) {\n    el.setAttribute('role', 'graphics-document');\n    el.setAttribute('aria-roleDescription', 'visualization');\n    ariaLabel(el, view.description());\n  }\n}\n\n// update aria-label if we have a DOM container element\nexport function ariaLabel(el, desc) {\n  if (el) desc == null\n    ? el.removeAttribute('aria-label')\n    : el.setAttribute('aria-label', desc);\n}\n","import {isString} from 'vega-util';\n\nconst Default = 'default';\n\nexport default function(view) {\n  // get cursor signal, add to dataflow if needed\n  const cursor = view._signals.cursor || (view._signals.cursor = view.add({\n    user: Default,\n    item: null\n  }));\n\n  // evaluate cursor on each mousemove event\n  view.on(view.events('view', 'mousemove'), cursor,\n    (_, event) => {\n      const value = cursor.value,\n            user = value ? (isString(value) ? value : value.user) : Default,\n            item = event.item && event.item.cursor || null;\n\n      return (value && user === value.user && item == value.item)\n        ? value\n        : {user: user, item: item};\n    }\n  );\n\n  // when cursor signal updates, set visible cursor\n  view.add(null, function(_) {\n    let user = _.cursor,\n        item = this.value;\n\n    if (!isString(user)) {\n      item = user.item;\n      user = user.user;\n    }\n\n    setCursor(view, user && user !== Default ? user : (item || user));\n\n    return item;\n  }, {cursor: cursor});\n}\n\nexport function setCursor(view, cursor) {\n  const el = view.globalCursor()\n    ? (typeof document !== 'undefined' && document.body)\n    : view.container();\n\n  if (el) {\n    return cursor == null\n      ? el.style.removeProperty('cursor')\n      : (el.style.cursor = cursor);\n  }\n}\n","import {changeset, isChangeSet} from 'vega-dataflow';\nimport {error, hasOwnProperty, truthy} from 'vega-util';\n\nexport function dataref(view, name) {\n  var data = view._runtime.data;\n  if (!hasOwnProperty(data, name)) {\n    error('Unrecognized data set: ' + name);\n  }\n  return data[name];\n}\n\nexport function data(name, values) {\n  return arguments.length < 2\n    ? dataref(this, name).values.value\n    : change.call(this, name, changeset().remove(truthy).insert(values));\n}\n\nexport function change(name, changes) {\n  if (!isChangeSet(changes)) {\n    error('Second argument to changes must be a changeset.');\n  }\n  const dataset = dataref(this, name);\n  dataset.modified = true;\n  return this.pulse(dataset.input, changes);\n}\n\nexport function insert(name, _) {\n  return change.call(this, name, changeset().insert(_));\n}\n\nexport function remove(name, _) {\n  return change.call(this, name, changeset().remove(_));\n}\n","export function width(view) {\n  var padding = view.padding();\n  return Math.max(0, view._viewWidth + padding.left + padding.right);\n}\n\nexport function height(view) {\n  var padding = view.padding();\n  return Math.max(0, view._viewHeight + padding.top + padding.bottom);\n}\n\nexport function offset(view) {\n  var padding = view.padding(),\n      origin = view._origin;\n  return [\n    padding.left + origin[0],\n    padding.top + origin[1]\n  ];\n}\n\nexport function resizeRenderer(view) {\n  var origin = offset(view),\n      w = width(view),\n      h = height(view);\n\n  view._renderer.background(view.background());\n  view._renderer.resize(w, h, origin);\n  view._handler.origin(origin);\n\n  view._resizeListeners.forEach(handler => {\n    try {\n      handler(w, h);\n    } catch (error) {\n      view.error(error);\n    }\n  });\n}\n","import {offset} from './render-size';\nimport {constant, isString} from 'vega-util';\nimport {point} from 'vega-scenegraph';\n\n/**\n * Extend an event with additional view-specific methods.\n * Adds a new property ('vega') to an event that provides a number\n * of methods for querying information about the current interaction.\n * The vega object provides the following methods:\n *   view - Returns the backing View instance.\n *   item - Returns the currently active scenegraph item (if any).\n *   group - Returns the currently active scenegraph group (if any).\n *     This method accepts a single string-typed argument indicating the name\n *     of the desired parent group. The scenegraph will be traversed from\n *     the item up towards the root to search for a matching group. If no\n *     argument is provided the enclosing group for the active item is\n *     returned, unless the item it itself a group, in which case it is\n *     returned directly.\n *   xy - Returns a two-element array containing the x and y coordinates for\n *     mouse or touch events. For touch events, this is based on the first\n *     elements in the changedTouches array. This method accepts a single\n *     argument: either an item instance or mark name that should serve as\n *     the reference coordinate system. If no argument is provided the\n *     top-level view coordinate system is assumed.\n *   x - Returns the current x-coordinate, accepts the same arguments as xy.\n *   y - Returns the current y-coordinate, accepts the same arguments as xy.\n * @param {Event} event - The input event to extend.\n * @param {Item} item - The currently active scenegraph item (if any).\n * @return {Event} - The extended input event.\n */\nexport default function(view, event, item) {\n  var r  = view._renderer,\n      el = r && r.canvas(),\n      p, e, translate;\n\n  if (el) {\n    translate = offset(view);\n    e = event.changedTouches ? event.changedTouches[0] : event;\n    p = point(e, el);\n    p[0] -= translate[0];\n    p[1] -= translate[1];\n  }\n\n  event.dataflow = view;\n  event.item = item;\n  event.vega = extension(view, item, p);\n  return event;\n}\n\nfunction extension(view, item, point) {\n  const itemGroup = item\n    ? item.mark.marktype === 'group' ? item : item.mark.group\n    : null;\n\n  function group(name) {\n    var g = itemGroup, i;\n    if (name) for (i = item; i; i = i.mark.group) {\n      if (i.mark.name === name) { g = i; break; }\n    }\n    return g && g.mark && g.mark.interactive ? g : {};\n  }\n\n  function xy(item) {\n    if (!item) return point;\n    if (isString(item)) item = group(item);\n\n    const p = point.slice();\n    while (item) {\n      p[0] -= item.x || 0;\n      p[1] -= item.y || 0;\n      item = item.mark && item.mark.group;\n    }\n    return p;\n  }\n\n  return {\n    view:  constant(view),\n    item:  constant(item || {}),\n    group: group,\n    xy:    xy,\n    x:     item => xy(item)[0],\n    y:     item => xy(item)[1]\n  };\n}\n","import eventExtend from './events-extend';\nimport {EventStream} from 'vega-dataflow';\nimport {array, extend, isArray, isObject, toSet} from 'vega-util';\n\nconst VIEW = 'view',\n      TIMER = 'timer',\n      WINDOW = 'window',\n      NO_TRAP = {trap: false};\n\n/**\n * Initialize event handling configuration.\n * @param {object} config - The configuration settings.\n * @return {object}\n */\nexport function initializeEventConfig(config) {\n  const events = extend({defaults: {}}, config);\n\n  const unpack = (obj, keys) => {\n    keys.forEach(k => {\n      if (isArray(obj[k])) obj[k] = toSet(obj[k]);\n    });\n  };\n\n  unpack(events.defaults, ['prevent', 'allow']);\n  unpack(events, ['view', 'window', 'selector']);\n\n  return events;\n}\n\nexport function trackEventListener(view, sources, type, handler) {\n  view._eventListeners.push({\n    type: type,\n    sources: array(sources),\n    handler: handler\n  });\n}\n\nfunction prevent(view, type) {\n  var def = view._eventConfig.defaults,\n      prevent = def.prevent,\n      allow = def.allow;\n\n  return prevent === false || allow === true ? false\n    : prevent === true || allow === false ? true\n    : prevent ? prevent[type]\n    : allow ? !allow[type]\n    : view.preventDefault();\n}\n\nfunction permit(view, key, type) {\n  const rule = view._eventConfig && view._eventConfig[key];\n\n  if (rule === false || (isObject(rule) && !rule[type])) {\n    view.warn(`Blocked ${key} ${type} event listener.`);\n    return false;\n  }\n\n  return true;\n}\n\n/**\n * Create a new event stream from an event source.\n * @param {object} source - The event source to monitor.\n * @param {string} type - The event type.\n * @param {function(object): boolean} [filter] - Event filter function.\n * @return {EventStream}\n */\nexport function events(source, type, filter) {\n  var view = this,\n      s = new EventStream(filter),\n      send = function(e, item) {\n        view.runAsync(null, () => {\n          if (source === VIEW && prevent(view, type)) {\n            e.preventDefault();\n          }\n          s.receive(eventExtend(view, e, item));\n        });\n      },\n      sources;\n\n  if (source === TIMER) {\n    if (permit(view, 'timer', type)) {\n      view.timer(send, type);\n    }\n  }\n\n  else if (source === VIEW) {\n    if (permit(view, 'view', type)) {\n      // send traps errors, so use {trap: false} option\n      view.addEventListener(type, send, NO_TRAP);\n    }\n  }\n\n  else {\n    if (source === WINDOW) {\n      if (permit(view, 'window', type) && typeof window !== 'undefined') {\n        sources = [window];\n      }\n    } else if (typeof document !== 'undefined') {\n      if (permit(view, 'selector', type)) {\n        sources = document.querySelectorAll(source);\n      }\n    }\n\n    if (!sources) {\n      view.warn('Can not resolve event source: ' + source);\n    } else {\n      for (var i=0, n=sources.length; i<n; ++i) {\n        sources[i].addEventListener(type, send);\n      }\n      trackEventListener(view, sources, type, send);\n    }\n  }\n\n  return s;\n}\n","function itemFilter(event) {\n  return event.item;\n}\n\nfunction markTarget(event) {\n  // grab upstream collector feeding the mark operator\n  return event.item.mark.source;\n}\n\nfunction invoke(name) {\n  return function(_, event) {\n    return event.vega.view()\n      .changeset()\n      .encode(event.item, name);\n  };\n}\n\nexport default function(hoverSet, leaveSet) {\n  hoverSet = [hoverSet || 'hover'];\n  leaveSet = [leaveSet || 'update', hoverSet[0]];\n\n  // invoke hover set upon mouseover\n  this.on(\n    this.events('view', 'mouseover', itemFilter),\n    markTarget,\n    invoke(hoverSet)\n  );\n\n  // invoke leave set upon mouseout\n  this.on(\n    this.events('view', 'mouseout', itemFilter),\n    markTarget,\n    invoke(leaveSet)\n  );\n\n  return this;\n}\n","export default function(tag, attr, text) {\n  const el = document.createElement(tag);\n  for (const key in attr) el.setAttribute(key, attr[key]);\n  if (text != null) el.textContent = text;\n  return el;\n}\n","var e10 = Math.sqrt(50),\n    e5 = Math.sqrt(10),\n    e2 = Math.sqrt(2);\n\nexport default function ticks(start, stop, count) {\n  var reverse,\n      i = -1,\n      n,\n      ticks,\n      step;\n\n  stop = +stop, start = +start, count = +count;\n  if (start === stop && count > 0) return [start];\n  if (reverse = stop < start) n = start, start = stop, stop = n;\n  if ((step = tickIncrement(start, stop, count)) === 0 || !isFinite(step)) return [];\n\n  if (step > 0) {\n    let r0 = Math.round(start / step), r1 = Math.round(stop / step);\n    if (r0 * step < start) ++r0;\n    if (r1 * step > stop) --r1;\n    ticks = new Array(n = r1 - r0 + 1);\n    while (++i < n) ticks[i] = (r0 + i) * step;\n  } else {\n    step = -step;\n    let r0 = Math.round(start * step), r1 = Math.round(stop * step);\n    if (r0 / step < start) ++r0;\n    if (r1 / step > stop) --r1;\n    ticks = new Array(n = r1 - r0 + 1);\n    while (++i < n) ticks[i] = (r0 + i) / step;\n  }\n\n  if (reverse) ticks.reverse();\n\n  return ticks;\n}\n\nexport function tickIncrement(start, stop, count) {\n  var step = (stop - start) / Math.max(0, count),\n      power = Math.floor(Math.log(step) / Math.LN10),\n      error = step / Math.pow(10, power);\n  return power >= 0\n      ? (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1) * Math.pow(10, power)\n      : -Math.pow(10, -power) / (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1);\n}\n\nexport function tickStep(start, stop, count) {\n  var step0 = Math.abs(stop - start) / Math.max(0, count),\n      step1 = Math.pow(10, Math.floor(Math.log(step0) / Math.LN10)),\n      error = step0 / step1;\n  if (error >= e10) step1 *= 10;\n  else if (error >= e5) step1 *= 5;\n  else if (error >= e2) step1 *= 2;\n  return stop < start ? -step1 : step1;\n}\n","import element from './element';\nimport {trackEventListener} from './events';\nimport {debounce} from 'vega-util';\nimport {tickStep} from 'd3-array';\n\nconst BindClass = 'vega-bind',\n      NameClass = 'vega-bind-name',\n      RadioClass = 'vega-bind-radio';\n\n/**\n * Bind a signal to an external HTML input element. The resulting two-way\n * binding will propagate input changes to signals, and propagate signal\n * changes to the input element state. If this view instance has no parent\n * element, we assume the view is headless and no bindings are created.\n * @param {Element|string} el - The parent DOM element to which the input\n *   element should be appended as a child. If string-valued, this argument\n *   will be treated as a CSS selector. If null or undefined, the parent\n *   element of this view will be used as the element.\n * @param {object} param - The binding parameters which specify the signal\n *   to bind to, the input element type, and type-specific configuration.\n * @return {View} - This view instance.\n */\nexport default function(view, el, binding) {\n  if (!el) return;\n\n  const param = binding.param;\n  let bind = binding.state;\n\n  if (!bind) {\n    bind = binding.state = {\n      elements: null,\n      active: false,\n      set: null,\n      update: value => {\n        if (value != view.signal(param.signal)) {\n          view.runAsync(null, () => {\n            bind.source = true;\n            view.signal(param.signal, value);\n          });\n        }\n      }\n    };\n    if (param.debounce) {\n      bind.update = debounce(param.debounce, bind.update);\n    }\n  }\n\n  const create = param.input == null && param.element ? target : generate;\n  create(bind, el, param, view);\n\n  if (!bind.active) {\n    view.on(view._signals[param.signal], null, () => {\n      bind.source\n        ? (bind.source = false)\n        : bind.set(view.signal(param.signal));\n    });\n    bind.active = true;\n  }\n\n  return bind;\n}\n\n/**\n * Bind the signal to an external EventTarget.\n */\nfunction target(bind, node, param, view) {\n  const type = param.event || 'input';\n  const handler = () => bind.update(node.value);\n\n  // initialize signal value to external input value\n  view.signal(param.signal, node.value);\n\n  // listen for changes on the element\n  node.addEventListener(type, handler);\n\n  // register with view, so we can remove it upon finalization\n  trackEventListener(view, node, type, handler);\n\n  // propagate change to element\n  bind.set = value => {\n    node.value = value;\n    node.dispatchEvent(event(type));\n  };\n}\n\nfunction event(type) {\n  return typeof Event !== 'undefined' ? new Event(type) : { type };\n}\n\n/**\n * Generate an HTML input form element and bind it to a signal.\n */\nfunction generate(bind, el, param, view) {\n  const value = view.signal(param.signal);\n  const div = element('div', {'class': BindClass});\n\n  const wrapper = param.input === 'radio'\n    ? div\n    : div.appendChild(element('label'));\n\n  wrapper.appendChild(element('span',\n    {'class': NameClass},\n    (param.name || param.signal)\n  ));\n\n  el.appendChild(div);\n\n  let input = form;\n  switch (param.input) {\n    case 'checkbox': input = checkbox; break;\n    case 'select':   input = select; break;\n    case 'radio':    input = radio; break;\n    case 'range':    input = range; break;\n  }\n\n  input(bind, wrapper, param, value);\n}\n\n/**\n * Generates an arbitrary input form element.\n * The input type is controlled via user-provided parameters.\n */\nfunction form(bind, el, param, value) {\n  const node = element('input');\n\n  for (const key in param) {\n    if (key !== 'signal' && key !== 'element') {\n      node.setAttribute(key === 'input' ? 'type' : key, param[key]);\n    }\n  }\n  node.setAttribute('name', param.signal);\n  node.value = value;\n\n  el.appendChild(node);\n  node.addEventListener('input', () => bind.update(node.value));\n\n  bind.elements = [node];\n  bind.set = value => node.value = value;\n}\n\n/**\n * Generates a checkbox input element.\n */\nfunction checkbox(bind, el, param, value) {\n  const attr = {type: 'checkbox', name: param.signal};\n  if (value) attr.checked = true;\n  const node = element('input', attr);\n\n  el.appendChild(node);\n  node.addEventListener('change', () => bind.update(node.checked));\n\n  bind.elements = [node];\n  bind.set = value => node.checked = !!value || null;\n}\n\n/**\n * Generates a selection list input element.\n */\nfunction select(bind, el, param, value) {\n  const node = element('select', {name: param.signal}),\n        labels = param.labels || [];\n\n  param.options.forEach((option, i) => {\n    const attr = {value: option};\n    if (valuesEqual(option, value)) attr.selected = true;\n    node.appendChild(element('option', attr, (labels[i] || option)+''));\n  });\n\n  el.appendChild(node);\n\n  node.addEventListener('change', () => {\n    bind.update(param.options[node.selectedIndex]);\n  });\n\n  bind.elements = [node];\n  bind.set = value => {\n    for (let i = 0, n = param.options.length; i < n; ++i) {\n      if (valuesEqual(param.options[i], value)) {\n        node.selectedIndex = i; return;\n      }\n    }\n  };\n}\n\n/**\n * Generates a radio button group.\n */\nfunction radio(bind, el, param, value) {\n  const group = element('span', {'class': RadioClass}),\n        labels = param.labels || [];\n\n  el.appendChild(group);\n\n  bind.elements = param.options.map((option, i) => {\n    const attr = {\n      type:  'radio',\n      name:  param.signal,\n      value: option\n    };\n    if (valuesEqual(option, value)) attr.checked = true;\n\n    const input = element('input', attr);\n    input.addEventListener('change', () => bind.update(option));\n\n    const label = element('label', {}, (labels[i] || option)+'');\n    label.prepend(input);\n    group.appendChild(label);\n\n    return input;\n  });\n\n  bind.set = value => {\n    const nodes = bind.elements,\n          n = nodes.length;\n    for (let i = 0; i < n; ++i) {\n      if (valuesEqual(nodes[i].value, value)) nodes[i].checked = true;\n    }\n  };\n}\n\n/**\n * Generates a slider input element.\n */\nfunction range(bind, el, param, value) {\n  value = value !== undefined ? value : ((+param.max) + (+param.min)) / 2;\n\n  const max = param.max != null ? param.max : Math.max(100, +value) || 100,\n        min = param.min || Math.min(0, max, +value) || 0,\n        step = param.step || tickStep(min, max, 100);\n\n  const node = element('input', {\n    type:  'range',\n    name:  param.signal,\n    min:   min,\n    max:   max,\n    step:  step\n  });\n  node.value = value;\n\n  const span = element('span', {}, +value);\n\n  el.appendChild(node);\n  el.appendChild(span);\n\n  const update = () => {\n    span.textContent = node.value;\n    bind.update(+node.value);\n  };\n\n  // subscribe to both input and change\n  node.addEventListener('input', update);\n  node.addEventListener('change', update);\n\n  bind.elements = [node];\n  bind.set = value => {\n    node.value = value;\n    span.textContent = value;\n  };\n}\n\nfunction valuesEqual(a, b) {\n  return a === b || (a+'' === b+'');\n}\n","import {height, offset, width} from './render-size';\n\nexport default function(view, r, el, constructor, scaleFactor, opt) {\n  r = r || new constructor(view.loader());\n  return r\n    .initialize(el, width(view), height(view), offset(view), scaleFactor, opt)\n    .background(view.background());\n}\n","export default function(view, fn) {\n  return !fn ? null : function() {\n    try {\n      fn.apply(this, arguments);\n    } catch (error) {\n      view.error(error);\n    }\n  };\n}\n","import {initializeAria} from './aria';\nimport bind from './bind';\nimport element from './element';\nimport initializeRenderer from './initialize-renderer';\nimport initializeHandler from './initialize-handler';\nimport {CanvasHandler, renderModule} from 'vega-scenegraph';\n\nexport default function(el, elBind) {\n  const view = this,\n        type = view._renderType,\n        config = view._eventConfig.bind,\n        module = renderModule(type);\n\n  // containing dom element\n  el = view._el = el ? lookup(view, el, true) : null;\n\n  // initialize aria attributes\n  initializeAria(view);\n\n  // select appropriate renderer & handler\n  if (!module) view.error('Unrecognized renderer type: ' + type);\n  const Handler = module.handler || CanvasHandler,\n        Renderer = (el ? module.renderer : module.headless);\n\n  // initialize renderer and input handler\n  view._renderer = !Renderer ? null\n    : initializeRenderer(view, view._renderer, el, Renderer);\n  view._handler = initializeHandler(view, view._handler, el, Handler);\n  view._redraw = true;\n\n  // initialize signal bindings\n  if (el && config !== 'none') {\n    elBind = elBind ? (view._elBind = lookup(view, elBind, true))\n      : el.appendChild(element('form', {'class': 'vega-bindings'}));\n\n    view._bind.forEach(_ => {\n      if (_.param.element && config !== 'container') {\n        _.element = lookup(view, _.param.element, !!_.param.input);\n      }\n    });\n\n    view._bind.forEach(_ => {\n      bind(view, _.element || elBind, _);\n    });\n  }\n\n  return view;\n}\n\nfunction lookup(view, el, clear) {\n  if (typeof el === 'string') {\n    if (typeof document !== 'undefined') {\n      el = document.querySelector(el);\n      if (!el) {\n        view.error('Signal bind element not found: ' + el);\n        return null;\n      }\n    } else {\n      view.error('DOM document instance not found.');\n      return null;\n    }\n  }\n  if (el && clear) {\n    try {\n      el.textContent = '';\n    } catch (e) {\n      el = null;\n      view.error(e);\n    }\n  }\n  return el;\n}\n","import {isObject} from 'vega-util';\n\nconst number = _ => +_ || 0;\n\nconst paddingObject = _ => ({top: _, bottom: _, left: _, right: _});\n\nexport default function(_) {\n  return isObject(_)\n    ? {\n        top:    number(_.top),\n        bottom: number(_.bottom),\n        left:   number(_.left),\n        right:  number(_.right)\n      }\n    : paddingObject(number(_));\n}\n","import initializeRenderer from './initialize-renderer';\nimport {renderModule} from 'vega-scenegraph';\nimport {error} from 'vega-util';\n\n/**\n * Render the current scene in a headless fashion.\n * This method is asynchronous, returning a Promise instance.\n * @return {Promise} - A Promise that resolves to a renderer.\n */\nexport default async function(view, type, scaleFactor, opt) {\n  const module = renderModule(type),\n        ctr = module && module.headless;\n\n  if (!ctr) error('Unrecognized renderer type: ' + type);\n\n  await view.runAsync();\n  return initializeRenderer(view, null, null, ctr, scaleFactor, opt)\n    .renderAsync(view._scenegraph.root);\n}\n","var Width = 'width',\n    Height = 'height',\n    Padding = 'padding',\n    Skip = {skip: true};\n\nexport function viewWidth(view, width) {\n  var a = view.autosize(),\n      p = view.padding();\n  return width - (a && a.contains === Padding ? p.left + p.right : 0);\n}\n\nexport function viewHeight(view, height) {\n  var a = view.autosize(),\n      p = view.padding();\n  return height - (a && a.contains === Padding ? p.top + p.bottom : 0);\n}\n\nexport function initializeResize(view) {\n  var s = view._signals,\n      w = s[Width],\n      h = s[Height],\n      p = s[Padding];\n\n  function resetSize() {\n    view._autosize = view._resize = 1;\n  }\n\n  // respond to width signal\n  view._resizeWidth = view.add(null,\n    _ => {\n      view._width = _.size;\n      view._viewWidth = viewWidth(view, _.size);\n      resetSize();\n    },\n    {size: w}\n  );\n\n  // respond to height signal\n  view._resizeHeight = view.add(null,\n    _ => {\n      view._height = _.size;\n      view._viewHeight = viewHeight(view, _.size);\n      resetSize();\n    },\n    {size: h}\n  );\n\n  // respond to padding signal\n  const resizePadding = view.add(null, resetSize, {pad: p});\n\n  // set rank to run immediately after source signal\n  view._resizeWidth.rank = w.rank + 1;\n  view._resizeHeight.rank = h.rank + 1;\n  resizePadding.rank = p.rank + 1;\n}\n\nexport function resizeView(viewWidth, viewHeight, width, height, origin, auto) {\n  this.runAfter(view => {\n    let rerun = 0;\n\n    // reset autosize flag\n    view._autosize = 0;\n\n    // width value changed: update signal, skip resize op\n    if (view.width() !== width) {\n      rerun = 1;\n      view.signal(Width, width, Skip); // set width, skip update calc\n      view._resizeWidth.skip(true); // skip width resize handler\n    }\n\n    // height value changed: update signal, skip resize op\n    if (view.height() !== height) {\n      rerun = 1;\n      view.signal(Height, height, Skip); // set height, skip update calc\n      view._resizeHeight.skip(true); // skip height resize handler\n    }\n\n    // view width changed: update view property, set resize flag\n    if (view._viewWidth !== viewWidth) {\n      view._resize = 1;\n      view._viewWidth = viewWidth;\n    }\n\n    // view height changed: update view property, set resize flag\n    if (view._viewHeight !== viewHeight) {\n      view._resize = 1;\n      view._viewHeight = viewHeight;\n    }\n\n    // origin changed: update view property, set resize flag\n    if (view._origin[0] !== origin[0] || view._origin[1] !== origin[1]) {\n      view._resize = 1;\n      view._origin = origin;\n    }\n\n    // run dataflow on width/height signal change\n    if (rerun) view.run('enter');\n    if (auto) view.runAfter(v => v.resize());\n  }, false, 1);\n}\n","import {transforms} from 'vega-dataflow';\nimport {isArray} from 'vega-util';\n\n/**\n * Get the current view state, consisting of signal values and/or data sets.\n * @param {object} [options] - Options flags indicating which state to export.\n *   If unspecified, all signals and data sets will be exported.\n * @param {function(string, Operator):boolean} [options.signals] - Optional\n *   predicate function for testing if a signal should be included in the\n *   exported state. If unspecified, all signals will be included, except for\n *   those named 'parent' or those which refer to a Transform value.\n * @param {function(string, object):boolean} [options.data] - Optional\n *   predicate function for testing if a data set's input should be included\n *   in the exported state. If unspecified, all data sets that have been\n *   explicitly modified will be included.\n * @param {boolean} [options.recurse=true] - Flag indicating if the exported\n *   state should recursively include state from group mark sub-contexts.\n * @return {object} - An object containing the exported state values.\n */\nexport function getState(options) {\n  return this._runtime.getState(options || {\n    data:    dataTest,\n    signals: signalTest,\n    recurse: true\n  });\n}\n\nfunction dataTest(name, data) {\n  return data.modified\n      && isArray(data.input.value)\n      && name.indexOf('_:vega:_');\n}\n\nfunction signalTest(name, op) {\n  return !(name === 'parent' || op instanceof transforms.proxy);\n}\n\n/**\n * Sets the current view state and updates the view by invoking run.\n * @param {object} state - A state object containing signal and/or\n *   data set values, following the format used by the getState method.\n * @return {View} - This view instance.\n */\nexport function setState(state) {\n  this.runAsync(null,\n    v => { v._trigger = false; v._runtime.setState(state); },\n    v => { v._trigger = true; }\n  );\n  return this;\n}\n","var frame = 0, // is an animation frame pending?\n    timeout = 0, // is a timeout pending?\n    interval = 0, // are any timers active?\n    pokeDelay = 1000, // how frequently we check for clock skew\n    taskHead,\n    taskTail,\n    clockLast = 0,\n    clockNow = 0,\n    clockSkew = 0,\n    clock = typeof performance === \"object\" && performance.now ? performance : Date,\n    setFrame = typeof window === \"object\" && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function(f) { setTimeout(f, 17); };\n\nexport function now() {\n  return clockNow || (setFrame(clearNow), clockNow = clock.now() + clockSkew);\n}\n\nfunction clearNow() {\n  clockNow = 0;\n}\n\nexport function Timer() {\n  this._call =\n  this._time =\n  this._next = null;\n}\n\nTimer.prototype = timer.prototype = {\n  constructor: Timer,\n  restart: function(callback, delay, time) {\n    if (typeof callback !== \"function\") throw new TypeError(\"callback is not a function\");\n    time = (time == null ? now() : +time) + (delay == null ? 0 : +delay);\n    if (!this._next && taskTail !== this) {\n      if (taskTail) taskTail._next = this;\n      else taskHead = this;\n      taskTail = this;\n    }\n    this._call = callback;\n    this._time = time;\n    sleep();\n  },\n  stop: function() {\n    if (this._call) {\n      this._call = null;\n      this._time = Infinity;\n      sleep();\n    }\n  }\n};\n\nexport function timer(callback, delay, time) {\n  var t = new Timer;\n  t.restart(callback, delay, time);\n  return t;\n}\n\nexport function timerFlush() {\n  now(); // Get the current time, if not already set.\n  ++frame; // Pretend we’ve set an alarm, if we haven’t already.\n  var t = taskHead, e;\n  while (t) {\n    if ((e = clockNow - t._time) >= 0) t._call.call(undefined, e);\n    t = t._next;\n  }\n  --frame;\n}\n\nfunction wake() {\n  clockNow = (clockLast = clock.now()) + clockSkew;\n  frame = timeout = 0;\n  try {\n    timerFlush();\n  } finally {\n    frame = 0;\n    nap();\n    clockNow = 0;\n  }\n}\n\nfunction poke() {\n  var now = clock.now(), delay = now - clockLast;\n  if (delay > pokeDelay) clockSkew -= delay, clockLast = now;\n}\n\nfunction nap() {\n  var t0, t1 = taskHead, t2, time = Infinity;\n  while (t1) {\n    if (t1._call) {\n      if (time > t1._time) time = t1._time;\n      t0 = t1, t1 = t1._next;\n    } else {\n      t2 = t1._next, t1._next = null;\n      t1 = t0 ? t0._next = t2 : taskHead = t2;\n    }\n  }\n  taskTail = t0;\n  sleep(time);\n}\n\nfunction sleep(time) {\n  if (frame) return; // Soonest alarm already set, or will be.\n  if (timeout) timeout = clearTimeout(timeout);\n  var delay = time - clockNow; // Strictly less than if we recomputed clockNow.\n  if (delay > 24) {\n    if (time < Infinity) timeout = setTimeout(wake, time - clock.now() - clockSkew);\n    if (interval) interval = clearInterval(interval);\n  } else {\n    if (!interval) clockLast = clock.now(), interval = setInterval(poke, pokeDelay);\n    frame = 1, setFrame(wake);\n  }\n}\n","import {isArray, isDate, isObject} from 'vega-util';\n\nexport default function(handler, event, item, value) {\n  const el = handler.element();\n  if (el) el.setAttribute('title', formatTooltip(value));\n}\n\nfunction formatTooltip(value) {\n  return value == null ? ''\n    : isArray(value) ? formatArray(value)\n    : isObject(value) && !isDate(value) ? formatObject(value)\n    : value + '';\n}\n\nfunction formatObject(obj) {\n  return Object.keys(obj).map(key => {\n    const v = obj[key];\n    return key + ': ' + (isArray(v) ? formatArray(v) : formatValue(v));\n  }).join('\\n');\n}\n\nfunction formatArray(value) {\n  return '[' + value.map(formatValue).join(', ') + ']';\n}\n\nfunction formatValue(value) {\n  return isArray(value) ? '[\\u2026]'\n    : isObject(value) && !isDate(value) ? '{\\u2026}'\n    : value;\n}\n","import {ariaLabel} from './aria';\nimport background from './background';\nimport cursor, {setCursor} from './cursor';\nimport {change, data, dataref, insert, remove} from './data';\nimport {events, initializeEventConfig} from './events';\nimport hover from './hover';\nimport finalize from './finalize';\nimport initialize from './initialize';\nimport padding from './padding';\nimport renderToImageURL from './render-to-image-url';\nimport renderToCanvas from './render-to-canvas';\nimport renderToSVG from './render-to-svg';\nimport {resizeRenderer} from './render-size';\nimport runtime from './runtime';\nimport {scale} from './scale';\nimport {initializeResize, resizeView, viewHeight, viewWidth} from './size';\nimport {getState, setState} from './state';\nimport timer from './timer';\nimport defaultTooltip from './tooltip';\nimport trap from './trap';\n\nimport {Dataflow, asyncCallback} from 'vega-dataflow';\nimport {locale} from 'vega-format';\nimport {\n  CanvasHandler, RenderType, Scenegraph, renderModule\n} from 'vega-scenegraph';\nimport {\n  error, extend, hasOwnProperty, inherits, stringValue\n} from 'vega-util';\n\n/**\n * Create a new View instance from a Vega dataflow runtime specification.\n * The generated View will not immediately be ready for display. Callers\n * should also invoke the initialize method (e.g., to set the parent\n * DOM element in browser-based deployment) and then invoke the run\n * method to evaluate the dataflow graph. Rendering will automatically\n * be performed upon dataflow runs.\n * @constructor\n * @param {object} spec - The Vega dataflow runtime specification.\n */\nexport default function View(spec, options) {\n  const view = this;\n  options = options || {};\n\n  Dataflow.call(view);\n  if (options.loader) view.loader(options.loader);\n  if (options.logger) view.logger(options.logger);\n  if (options.logLevel != null) view.logLevel(options.logLevel);\n  if (options.locale || spec.locale) {\n    const loc = extend({}, spec.locale, options.locale);\n    view.locale(locale(loc.number, loc.time));\n  }\n\n  view._el = null;\n  view._elBind = null;\n  view._renderType = options.renderer || RenderType.Canvas;\n  view._scenegraph = new Scenegraph();\n  const root = view._scenegraph.root;\n\n  // initialize renderer, handler and event management\n  view._renderer = null;\n  view._tooltip = options.tooltip || defaultTooltip,\n  view._redraw = true;\n  view._handler = new CanvasHandler().scene(root);\n  view._globalCursor = false;\n  view._preventDefault = false;\n  view._timers = [];\n  view._eventListeners = [];\n  view._resizeListeners = [];\n\n  // initialize event configuration\n  view._eventConfig = initializeEventConfig(spec.eventConfig);\n  view.globalCursor(view._eventConfig.globalCursor);\n\n  // initialize dataflow graph\n  const ctx = runtime(view, spec, options.expr);\n  view._runtime = ctx;\n  view._signals = ctx.signals;\n  view._bind = (spec.bindings || []).map(_ => ({\n    state: null,\n    param: extend({}, _)\n  }));\n\n  // initialize scenegraph\n  if (ctx.root) ctx.root.set(root);\n  root.source = ctx.data.root.input;\n  view.pulse(\n    ctx.data.root.input,\n    view.changeset().insert(root.items)\n  );\n\n  // initialize view size\n  view._width = view.width();\n  view._height = view.height();\n  view._viewWidth = viewWidth(view, view._width);\n  view._viewHeight = viewHeight(view, view._height);\n  view._origin = [0, 0];\n  view._resize = 0;\n  view._autosize = 1;\n  initializeResize(view);\n\n  // initialize background color\n  background(view);\n\n  // initialize cursor\n  cursor(view);\n\n  // initialize view description\n  view.description(spec.description);\n\n  // initialize hover proessing, if requested\n  if (options.hover) view.hover();\n\n  // initialize DOM container(s) and renderer\n  if (options.container) view.initialize(options.container, options.bind);\n}\n\nfunction lookupSignal(view, name) {\n  return hasOwnProperty(view._signals, name)\n    ? view._signals[name]\n    : error('Unrecognized signal name: ' + stringValue(name));\n}\n\nfunction findOperatorHandler(op, handler) {\n  const h = (op._targets || [])\n    .filter(op => op._update && op._update.handler === handler);\n  return h.length ? h[0] : null;\n}\n\nfunction addOperatorListener(view, name, op, handler) {\n  let h = findOperatorHandler(op, handler);\n  if (!h) {\n    h = trap(view, () => handler(name, op.value));\n    h.handler = handler;\n    view.on(op, null, h);\n  }\n  return view;\n}\n\nfunction removeOperatorListener(view, op, handler) {\n  const h = findOperatorHandler(op, handler);\n  if (h) op._targets.remove(h);\n  return view;\n}\n\ninherits(View, Dataflow, {\n  // -- DATAFLOW / RENDERING ----\n\n  async evaluate(encode, prerun, postrun) {\n    // evaluate dataflow and prerun\n    await Dataflow.prototype.evaluate.call(this, encode, prerun);\n\n    // render as needed\n    if (this._redraw || this._resize) {\n      try {\n        if (this._renderer) {\n          if (this._resize) {\n            this._resize = 0;\n            resizeRenderer(this);\n          }\n          await this._renderer.renderAsync(this._scenegraph.root);\n        }\n        this._redraw = false;\n      } catch (e) {\n        this.error(e);\n      }\n    }\n\n    // evaluate postrun\n    if (postrun) asyncCallback(this, postrun);\n\n    return this;\n  },\n\n  dirty(item) {\n    this._redraw = true;\n    this._renderer && this._renderer.dirty(item);\n  },\n\n  // -- GET / SET ----\n\n  description(text) {\n    if (arguments.length) {\n      const desc = text != null ? (text + '') : null;\n      if (desc !== this._desc) ariaLabel(this._el, this._desc = desc);\n      return this;\n    }\n    return this._desc;\n  },\n\n  container() {\n    return this._el;\n  },\n\n  scenegraph() {\n    return this._scenegraph;\n  },\n\n  origin() {\n    return this._origin.slice();\n  },\n\n  signal(name, value, options) {\n    const op = lookupSignal(this, name);\n    return arguments.length === 1\n      ? op.value\n      : this.update(op, value, options);\n  },\n\n  width(_) {\n    return arguments.length ? this.signal('width', _) : this.signal('width');\n  },\n\n  height(_) {\n    return arguments.length ? this.signal('height', _) : this.signal('height');\n  },\n\n  padding(_) {\n    return arguments.length\n      ? this.signal('padding', padding(_))\n      : padding(this.signal('padding'));\n  },\n\n  autosize(_) {\n    return arguments.length ? this.signal('autosize', _) : this.signal('autosize');\n  },\n\n  background(_) {\n    return arguments.length ? this.signal('background', _) : this.signal('background');\n  },\n\n  renderer(type) {\n    if (!arguments.length) return this._renderType;\n    if (!renderModule(type)) error('Unrecognized renderer type: ' + type);\n    if (type !== this._renderType) {\n      this._renderType = type;\n      this._resetRenderer();\n    }\n    return this;\n  },\n\n  tooltip(handler) {\n    if (!arguments.length) return this._tooltip;\n    if (handler !== this._tooltip) {\n      this._tooltip = handler;\n      this._resetRenderer();\n    }\n    return this;\n  },\n\n  loader(loader) {\n    if (!arguments.length) return this._loader;\n    if (loader !== this._loader) {\n      Dataflow.prototype.loader.call(this, loader);\n      this._resetRenderer();\n    }\n    return this;\n  },\n\n  resize() {\n    // set flag to perform autosize\n    this._autosize = 1;\n    // touch autosize signal to ensure top-level ViewLayout runs\n    return this.touch(lookupSignal(this, 'autosize'));\n  },\n\n  _resetRenderer() {\n    if (this._renderer) {\n      this._renderer = null;\n      this.initialize(this._el, this._elBind);\n    }\n  },\n\n  // -- SIZING ----\n  _resizeView: resizeView,\n\n  // -- EVENT HANDLING ----\n\n  addEventListener(type, handler, options) {\n    let callback = handler;\n    if (!(options && options.trap === false)) {\n      // wrap callback in error handler\n      callback = trap(this, handler);\n      callback.raw = handler;\n    }\n    this._handler.on(type, callback);\n    return this;\n  },\n\n  removeEventListener(type, handler) {\n    var handlers = this._handler.handlers(type),\n        i = handlers.length, h, t;\n\n    // search registered handlers, remove if match found\n    while (--i >= 0) {\n      t = handlers[i].type;\n      h = handlers[i].handler;\n      if (type === t && (handler === h || handler === h.raw)) {\n        this._handler.off(t, h);\n        break;\n      }\n    }\n    return this;\n  },\n\n  addResizeListener(handler) {\n    const l = this._resizeListeners;\n    if (l.indexOf(handler) < 0) {\n      // add handler if it isn't already registered\n      // note: error trapping handled elsewhere, so\n      // no need to wrap handlers here\n      l.push(handler);\n    }\n    return this;\n  },\n\n  removeResizeListener(handler) {\n    var l = this._resizeListeners,\n        i = l.indexOf(handler);\n    if (i >= 0) {\n      l.splice(i, 1);\n    }\n    return this;\n  },\n\n  addSignalListener(name, handler) {\n    return addOperatorListener(this, name, lookupSignal(this, name), handler);\n  },\n\n  removeSignalListener(name, handler) {\n    return removeOperatorListener(this, lookupSignal(this, name), handler);\n  },\n\n  addDataListener(name, handler) {\n    return addOperatorListener(this, name, dataref(this, name).values, handler);\n  },\n\n  removeDataListener(name, handler) {\n    return removeOperatorListener(this, dataref(this, name).values, handler);\n  },\n\n  globalCursor(_) {\n    if (arguments.length) {\n      if (this._globalCursor !== !!_) {\n        const prev = setCursor(this, null); // clear previous cursor\n        this._globalCursor = !!_;\n        if (prev) setCursor(this, prev); // swap cursor\n      }\n      return this;\n    } else {\n      return this._globalCursor;\n    }\n  },\n\n  preventDefault(_) {\n    if (arguments.length) {\n      this._preventDefault = _;\n      return this;\n    } else {\n      return this._preventDefault;\n    }\n  },\n\n  timer,\n  events,\n  finalize,\n  hover,\n\n  // -- DATA ----\n  data,\n  change,\n  insert,\n  remove,\n\n  // -- SCALES --\n  scale,\n\n  // -- INITIALIZATION ----\n  initialize,\n\n  // -- HEADLESS RENDERING ----\n  toImageURL: renderToImageURL,\n  toCanvas: renderToCanvas,\n  toSVG: renderToSVG,\n\n  // -- SAVE / RESTORE STATE ----\n  getState,\n  setState\n});\n","import {transforms} from 'vega-dataflow';\nimport {functionContext} from 'vega-functions';\nimport {context} from 'vega-runtime';\n\nexport default function(view, spec, expr) {\n  return context(view, transforms, functionContext, expr).parse(spec);\n}\n","export default function(view) {\n  // respond to background signal\n  view.add(null, _ => {\n    view._background = _.bg;\n    view._resize = 1;\n    return _.bg;\n  }, { bg: view._signals.background });\n}\n","import {interval} from 'd3-timer';\n\nexport default function(callback, delay) {\n  function tick(elapsed) {\n    callback({timestamp: Date.now(), elapsed: elapsed});\n  }\n  this._timers.push(interval(tick, delay));\n}\n","import {Timer, now} from \"./timer.js\";\n\nexport default function(callback, delay, time) {\n  var t = new Timer, total = delay;\n  if (delay == null) return t.restart(callback, delay, time), t;\n  t._restart = t.restart;\n  t.restart = function(callback, delay, time) {\n    delay = +delay, time = time == null ? now() : +time;\n    t._restart(function tick(elapsed) {\n      elapsed += total;\n      t._restart(tick, total += delay, time);\n      callback(elapsed);\n    }, delay, time);\n  }\n  t.restart(callback, delay, time);\n  return t;\n}\n","/**\n * Finalize a View instance that is being removed.\n * Cancel any running timers.\n * Remove all external event listeners.\n * Remove any currently displayed tooltip.\n */\nexport default function() {\n  var tooltip = this._tooltip,\n      timers = this._timers,\n      listeners = this._eventListeners,\n      n, m, e;\n\n  n = timers.length;\n  while (--n >= 0) {\n    timers[n].stop();\n  }\n\n  n = listeners.length;\n  while (--n >= 0) {\n    e = listeners[n];\n    m = e.sources.length;\n    while (--m >= 0) {\n      e.sources[m].removeEventListener(e.type, e.handler);\n    }\n  }\n\n  if (tooltip) {\n    tooltip.call(this, this._handler, null, null, null);\n  }\n\n  return this;\n}\n","import {error, hasOwnProperty} from 'vega-util';\n\nexport function scale(name) {\n  var scales = this._runtime.scales;\n  if (!hasOwnProperty(scales, name)) {\n    error('Unrecognized scale or projection: ' + name);\n  }\n  return scales[name].value;\n}\n","import {offset} from './render-size';\nimport trap from './trap';\n\nexport default function(view, prevHandler, el, constructor) {\n  // instantiate scenegraph handler\n  const handler = new constructor(view.loader(), trap(view, view.tooltip()))\n    .scene(view.scenegraph().root)\n    .initialize(el, offset(view), view);\n\n  // transfer event handlers\n  if (prevHandler) {\n    prevHandler.handlers().forEach(h => {\n      handler.on(h.type, h.handler);\n    });\n  }\n\n  return handler;\n}\n","import renderHeadless from './render-headless';\nimport {RenderType as Type} from 'vega-scenegraph';\nimport {error} from 'vega-util';\n\n/**\n * Produce an image URL for the visualization. Depending on the type\n * parameter, the generated URL contains data for either a PNG or SVG image.\n * The URL can be used (for example) to download images of the visualization.\n * This method is asynchronous, returning a Promise instance.\n * @param {string} type - The image type. One of 'svg', 'png' or 'canvas'.\n *   The 'canvas' and 'png' types are synonyms for a PNG image.\n * @return {Promise} - A promise that resolves to an image URL.\n */\nexport default async function(type, scaleFactor) {\n  if (type !== Type.Canvas && type !== Type.SVG && type !== Type.PNG) {\n    error('Unrecognized image type: ' + type);\n  }\n\n  const r = await renderHeadless(this, type, scaleFactor);\n  return type === Type.SVG\n    ? toBlobURL(r.svg(), 'image/svg+xml')\n    : r.canvas().toDataURL('image/png');\n}\n\nfunction toBlobURL(data, mime) {\n  const blob = new Blob([data], {type: mime});\n  return window.URL.createObjectURL(blob);\n}\n","import renderHeadless from './render-headless';\nimport {RenderType} from 'vega-scenegraph';\n\n/**\n * Produce a Canvas instance containing a rendered visualization.\n * This method is asynchronous, returning a Promise instance.\n * @return {Promise} - A promise that resolves to a Canvas instance.\n */\nexport default async function(scaleFactor, opt) {\n  const r = await renderHeadless(this, RenderType.Canvas, scaleFactor, opt);\n  return r.canvas();\n}\n","import renderHeadless from './render-headless';\nimport {RenderType} from 'vega-scenegraph';\n\n/**\n * Produce a rendered SVG string of the visualization.\n * This method is asynchronous, returning a Promise instance.\n * @return {Promise} - A promise that resolves to an SVG string.\n */\nexport default async function(scaleFactor) {\n  const r = await renderHeadless(this, RenderType.SVG, scaleFactor);\n  return r.svg();\n}\n"],"names":["ariaLabel","el","desc","removeAttribute","setAttribute","Default","setCursor","view","cursor","globalCursor","document","body","container","style","removeProperty","dataref","name","data","_runtime","hasOwnProperty","error","change","changes","isChangeSet","dataset","this","modified","pulse","input","width","padding","Math","max","_viewWidth","left","right","height","_viewHeight","top","bottom","offset","origin","_origin","eventExtend","event","item","p","e","translate","r","_renderer","canvas","changedTouches","point","dataflow","vega","itemGroup","mark","marktype","group","g","i","interactive","xy","isString","slice","x","y","constant","extension","VIEW","NO_TRAP","trap","trackEventListener","sources","type","handler","_eventListeners","push","array","permit","key","rule","_eventConfig","isObject","warn","itemFilter","markTarget","source","invoke","_","changeset","encode","element","tag","attr","text","createElement","textContent","e10","sqrt","e5","e2","target","bind","node","param","update","value","signal","addEventListener","set","dispatchEvent","Event","generate","div","BindClass","wrapper","appendChild","NameClass","form","checkbox","select","radio","range","elements","checked","labels","options","forEach","option","valuesEqual","selected","selectedIndex","n","length","RadioClass","map","label","prepend","nodes","undefined","min","step","start","stop","count","step0","abs","step1","pow","floor","log","LN10","span","a","b","initializeRenderer","constructor","scaleFactor","opt","loader","initialize","background","fn","apply","arguments","lookup","clear","querySelector","number","paddingObject","async","renderHeadless","module","renderModule","ctr","headless","runAsync","renderAsync","_scenegraph","root","Width","Height","Padding","Skip","skip","viewWidth","autosize","contains","viewHeight","dataTest","isArray","indexOf","signalTest","op","transforms","proxy","taskHead","taskTail","frame","timeout","interval","clockLast","clockNow","clockSkew","clock","performance","now","Date","setFrame","window","requestAnimationFrame","f","setTimeout","clearNow","Timer","_call","_time","_next","wake","t","call","timerFlush","t0","t2","t1","time","Infinity","sleep","nap","poke","delay","clearTimeout","clearInterval","setInterval","defaultTooltip","formatArray","isDate","obj","Object","keys","v","formatValue","join","formatTooltip","View","spec","Dataflow","logger","logLevel","locale","loc","extend","_el","_elBind","_renderType","renderer","RenderType","Canvas","Scenegraph","_tooltip","tooltip","_redraw","_handler","CanvasHandler","scene","_globalCursor","_preventDefault","_timers","_resizeListeners","config","events","defaults","unpack","k","toSet","initializeEventConfig","eventConfig","ctx","expr","context","functionContext","parse","runtime","_signals","signals","_bind","bindings","state","insert","items","_width","_height","_resize","_autosize","s","w","h","resetSize","_resizeWidth","add","size","_resizeHeight","resizePadding","pad","rank","initializeResize","_background","bg","user","on","description","hover","lookupSignal","stringValue","findOperatorHandler","_targets","filter","_update","addOperatorListener","removeOperatorListener","remove","prototype","restart","callback","TypeError","inherits","prerun","postrun","evaluate","resize","asyncCallback","dirty","_desc","scenegraph","_resetRenderer","_loader","touch","_resizeView","auto","runAfter","rerun","run","raw","removeEventListener","handlers","off","addResizeListener","l","removeResizeListener","splice","addSignalListener","removeSignalListener","addDataListener","values","removeDataListener","prev","preventDefault","timer","total","_restart","tick","elapsed","timestamp","EventStream","send","def","prevent","allow","receive","querySelectorAll","finalize","m","timers","listeners","hoverSet","leaveSet","truthy","scale","scales","elBind","initializeAria","Handler","Renderer","prevHandler","initializeHandler","class","binding","active","debounce","toImageURL","Type","SVG","PNG","mime","blob","Blob","URL","createObjectURL","toBlobURL","svg","toDataURL","toCanvas","toSVG","getState","recurse","setState","_trigger"],"mappings":"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"}